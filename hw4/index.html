<html>
	<head>
		Homework 4 Writeup
	</head>
	<body>
		<a href="https://cal-cs184-student.github.io/hw-webpages-sp24-ericlu28/hw4/index.html">Webpage Link</a>
		<h1>Homework 4 Writeup</h1>
			<h2>Project Overview: </h2>
				<p>
					Overall, this was one of our favorite projects to complete. Being able to see the effects of all of the different
					textures and lighting/shading/mapping on the cloth objects, as well as seeing the cloth fall on the floor almost like
					a physics experiment was very cool to visualize and debug! We even came across some fun bug art, such as the cloth turning
					into looking like a wild animal flying around the screen (we shared to the Bug Art Ed). In terms of difficulty, this project
					was less difficult than Project 3, but slightly harder than Project 1's building. Also, the timing with spring break wasn't
					ideal for us, as we both took the time completely off from school, and didn't start particularly early. 
					<br>
					In terms of the workflow and debugging process, each part presented a different challenges.
					In part 1, it was pretty simple setting up the masses in a double for loop, and the only hurdle we overcame was conceptually
					understanding the row-major vs. column major differences (i vs. j). The springs setup was also not super difficult, just 
					many conditional cases to correctly place the springs in each correct location. In part 2, 	Joel handled all of the 
					problem solving and programming, and the process went mostly smoothly following formulas listed on lecture slides.
					In part 3, implementing sphere collide and plane collide was also pretty smooth. The learning curve with colliding with 
					the sphere was a bit tough at first, but once the sphere collision was implemented correctly, the plane collision was 
					simple to fill-in-the-blanks. In part 4, Eric handled the hash_position, which was simply applying the spec directions
					to put a vertex into a box location; initially, the hash function I created used a composite number, but was directed
					to use a prime number instead. Afterwards, building the spatial map was also not super problematic, it just 
					involved looking up a C++ function to check if the map has an existing key with map.count(). In part 5, Joel handled
					diffuse shading, texture mapping, and bump mapping, and then Eric mostly handled displacement
					mapping and blinn-phong shading. Overall, it was a good collaboration process, and we appreciate all of the help
					from the staff in office hours.
				</p>
			<h2>Part 1: </h2>
				<h3>Take some screenshots of scene/pinned2.json from a viewing angle where you can clearly see the cloth 
					wireframe to show the structure of your point masses and springs.</h3>
					<p>
					<img src="./p1-struc1.png" alt="cbspheres" width="600" height="450">
					<img src="./p1-struc2.png" alt="cbspheres" width="600" height="450">
					</p>
				<h3>Show us what the wireframe looks like (1) without any shearing constraints, 
					(2) with only shearing constraints, and (3) with all constraints.</h3>
					<p>Without shearing constraints:
						<img src="./p1-noshearing.png" alt="cbspheres" width="600" height="450">
					</p>
					<p>Only shearing constraints:
						<img src="./p1-shearingonly.png" alt="cbspheres" width="600" height="450">
					</p>
					<p>All constraints:
						<img src="./p1-allconstraints.png" alt="cbspheres" width="600" height="450">
					</p>
			<h2> Part 2: </h2>
				<h3>Experiment with some the parameters in the simulation. To do so, pause the simulation at the start with P, 
					modify the values of interest, and then resume by pressing P again. 
					You can also restart the simulation at any time from the cloth's starting position by pressing R.</h3>
				<h3>Describe the effects of changing the spring constant ks; how does the cloth behave from start to rest with a 
					very low ks? A high ks?</h3>
					<p>Changing the the spring constant ks changes both the tension by which the cloth hangs from the pins, 
						as well as the speed at which the cloth falls during the simulation. From a resting position with a very low ks,
						such as experimented values like 1 N/m and 100 N/m, the cloth is much more compressed on the left and right
						sides, and also hangs lower at the top, signifying more effects of gravity pushing down because of the lower
						tension from the pins. From a resting position with a high ks value, such as experimented values like 10000 N/m, the 
						cloth has almost no compression from the left and right sides, as well as minimal fold at the top. At 
						100000 N/m, it essentially looks like the cloth is laying flat on the ground stretched out, as the tension 
						from the springs is completely stretching out the cloth.
					</p>
				<h3>What about for density?</h3>
					<p>Changing the density of the cloth also changes how much compression and stretching it experiences. 
						With lower cloth density values, we see the cloth experiencing less downwards stretch at the top folding over,
						as well as less compression from the left and right sides. With higher density values, the cloth is hanging "heavier"
						on the pins, so there is more downward pull from gravity, as well as more compression from the left and right sides
						towards the center of the cloth.
					</p>
				<h3>What about for damping?</h3>
					<p>
						Damping affects the speed and motion at which the cloth gets from start to finish of the simulation. At low percentage 
						damping values, the cloth falls rapidly, and sways back-and-forth in motion, as its very light and affected by 
						forces. Thusk, it takes a while for the cloth to reach a steady state. Also, the non-pinned corners
						of the cloth flap inwards back-and-forth at ease. At high percentage damping values, the cloth falls very slowly, and 
						almost immediately reaches steady state; there is no flapping back-and-forth occuring because the cloth is much heavier in motion and 
						unaffected.

					</p>
				<h3>For each of the above, observe any noticeable differences in the cloth compared to the default parameters 
					and show us some screenshots of those interesting differences and describe when they occur.</h3>
					<p>
						Default: <img src="./p2-default.png" alt="cbspheres" width="600" height="450">
					</p>
					<p>
						Low ks spring value: The cloth hangs much  lower at the immediate resting state.
						<img src="./p2-low-ks.png" alt="cbspheres" width="600" height="450">
					</p>
					<p>
						High ks spring value: The cloth hangs much higher and tense at the resting state.
						<img src="./p2-high-ks.png" alt="cbspheres" width="600" height="450">
					</p>
					<p>
						Low density value: The cloth has very little compression hanging off of the pins at the resting state
						because it has so little density to weigh it down. Also, it falls quicker from starting resting position
						to final resting position.
						<img src="./p2-low-density.png" alt="cbspheres" width="600" height="450">
					</p>
					<p>
						High density value: The cloth hangs much lower at the resting state because 
						it is more dense, and also takes a longer time
						during the simulation to fall, as the fall is more exaggerated/elongated
						<img src="./p2-high-density.png" alt="cbspheres" width="600" height="450">
					</p>
					<p>
						Low damping percentage: At all times from the start to end resting state, the cloth flops around
						aggressively and loosely, swinging back and forth many times before reaching resting state. 
						It takes much longer for the cloth to reach steady state than the default parameters, but that is not because
						it falls slower Ths is because it is going past the location of resting state, and swining back and forth 
						over that location sinusoidally.

						Here are some images of the swinging back and forth process.
						<b>Swinging there: </b>
						<img src="./p2-low-damping-there1.png" alt="cbspheres" width="600" height="450">
						<img src="./p2-low-damping-there2.png" alt="cbspheres" width="600" height="450">
						<b>Middle: </b>
						<img src="./p2-low-damping-mid.png" alt="cbspheres" width="600" height="450">
						<b> Swinging back: </b>
						<img src="./p2-low-damping-back1.png" alt="cbspheres" width="600" height="450">
						<img src="./p2-low-damping-back2.png" alt="cbspheres" width="600" height="450">
					</p>
					<p>
						High damping percentage: From the start to end resting state, the cloth falls downwards in one predictable
						motion, not swinging back and forth at all. It reaches the resting state slower than the default parameters,
						and that is because it is falling slower. 
						<b>Start:</b><img src="./p2-high-damping-1.png" alt="cbspheres" width="600" height="450">
						<b>Middle:</b><img src="./p2-high-damping-2.png" alt="cbspheres" width="600" height="450">
						<b>Ending:</b><img src="./p2-high-damping-3.png" alt="cbspheres" width="600" height="450">
					</p>
				<h3>Show us a screenshot of your shaded cloth from scene/pinned4.json in its final resting state! 
					If you choose to use different parameters than the default ones, please list them.</h3>
					<p>
						<img src="./p2-pinned4.png" alt="cbspheres" width="600" height="450">
					</p>
			<h2> Part 3: </h2>
				<h3>Show us screenshots of your shaded cloth from scene/sphere.json in its final resting state on the sphere 
					using the default ks = 5000 as well as with ks = 500 and ks = 50000. Describe the differences in the results.</h3>
					<p>
						<b>Default ks shaded cloth:</b>
						<img src="./p3-default-ks.png" alt="cbspheres" width="600" height="450">
					</p>
					<p>
						<b>Low ks shaded cloth:</b>
						<img src="./p3-low-ks.png" alt="cbspheres" width="600" height="450">
					</p>
					<p>
						<b>High ks shaded cloth:</b>
						<img src="./p3-high-ks.png" alt="cbspheres" width="600" height="450">
					</p>
					<p>
						The major differences in the shaded cloth on the sphere for the different ks values is the looseness in 
						orientation that the cloth is draped over the sphere. In the lowest ks cloth, the cloth is draped most loosely 
						over the cloth, and we can see that the ridges in the cloth barely point outwards, as they're being directed
						draping downwards. In the highest ks cloth, the cloth is hardly draped tightly over the top of the sphere, and then 
						the rest of the cloth pushes outwards, rather than draping down. The default ks shaded cloth is in-between, with 
						much less outwards push, but some downwards draping.
					</p>
				<h3>Show us a screenshot of your shaded cloth lying peacefully at rest on the plane. 
					If you haven't by now, feel free to express your colorful creativity with the cloth! 
					(You will need to complete the shaders portion first to show custom colors.)</h3>
					<p>
						<img src="./p3-plane.png" alt="cbspheres" width="600" height="450">
					</p>
			<h2> Part 4: </h2>
				<h3>Show us at least 3 screenshots that document how your cloth falls and folds on itself, 
					starting with an early, initial self-collision and ending with the cloth at a more restful state 
					(even if it is still slightly bouncy on the ground).</h3>
					<p>
						<img src="./p4-1.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-2.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-3.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-4.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-5.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-6.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-7.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-8.png" alt="cbspheres" width="400" height="300">
					</p>
				<h3>Vary the density as well as ks and describe with words and screenshots how they affect the behavior of 
					the cloth as it falls on itself.</h3>
					<p>
						Generally, the density value varies how many flaps and flap size are in the folded cloth on the ground. 
						On lower density values, the flaps are larger, and the cloth is unraveling bigger folds.
						On higher density values, there is many more smaller folds within the cloth. This also means that it
						is much harder for the cloth to unravel on the ground with higher density values because many more pieces
						of the cloth are interwoven, whereas the low density cloth unravels mostly near the end resting state.
					</p>
					<p>
						<b>Low density (larger and less folds, more unraveling):</b>
					</p>
					<p>
						<img src="./p4-high-density1.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-high-density2.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-high-density3.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-high-density4.png" alt="cbspheres" width="400" height="300">
					</p>
					<p>
						<b>High density (smaller and more folds, less unraveling):</b>
					</p>
					<p>
						<img src="./p4-low-density1.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-low-density2.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-low-density3.png" alt="cbspheres" width="400" height="300">
					</p>
					<p>
						Varying the ks changes the size of the flaps (circumference of the circle one way to measure)
						are in the folded cloth on the ground. For lower ks values, there is much thinner flaps with more
						length. For higher ks values, there are much thicker, and less folds in the cloth as it compresses
						from falling onto the ground and rolling. 
					</p>
					<p>
						<b>Low ks (thinner and more folds, more interweaving of the folds)</b>
					</p>
					<p>
						<img src="./p4-low-ks1.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-low-ks2.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-low-ks3.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-low-ks4.png" alt="cbspheres" width="400" height="300">
					</p>
					<p>
						<b>High ks (thick and very few folds)</b>
					</p>
					<p>
						<img src="./p4-high-ks1.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-high-ks2.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-high-ks3.png" alt="cbspheres" width="400" height="300">
						<img src="./p4-high-ks4.png" alt="cbspheres" width="400" height="300">
					</p>
			<h2> Part 5: </h2>
				<h3>Explain in your own words what is a shader program and how vertex and fragment shaders work together 
					to create lighting and material effects.</h3>
					<p>
						Shader programs are programs that run separate but alongside the GPU, carrying out tasks in rendering like
						calculating light, darkness, and color during rendering a 3D scene. Shader programs are often used for customizing
						effects using algorithms that are able to be modified by external textures introduced by the program.
						<br>
						Vertex shaders are shaders run for each vertex in the graphics pipeline, and they are meant to translate the
						3D position of each vertex into the 2D coordinate that we see on the computer screen. Fragment shaders execute
						after vertex shaders to compute color of each pixel fragment, along with bump mapping, shaddows, translucency, and other
						render types. Together, vertex shaders and fragment shaders collaborate to contribute to lighting and 
						material effects. For lighting, the vertex shader transforms vertex normals into eye space and computes light
						intensity; the fragment shader takes these interpolated values and calculates final lighting contribution for
						each pixel. For material effects, vertex shaders define material properties per vertex or per fragment, and
						interpolated across the surface; in the fragment shader, these material properties are combined with
						lighting calculations to determine the final appearance for eah pixel.
					</p>
				<h3>Explain the Blinn-Phong shading model in your own words. Show a screenshot of your Blinn-Phong shader 
					outputting only the ambient component, a screen shot only outputting the diffuse component, 
					a screen shot only outputting the specular component, and one using the entire Blinn-Phong model.</h3>
					<p>
						The Blinn-Phone shading model is a shading model carried out on each vertex meant to simulate
						how light interacts with surfaces in computer graphics. In the Blinn-Phong shading model, there's three terms:
						ambient, diffuse, and spectaluar. In the ambient term, which is the product of ambient light color 
						and ambient reflectance coeffficient. This value provides the baseline illumination to objects in the scene.
						The diffuse term accounts for light scattered equally when it hits a surface, and its commonly calculated
						through the Lambertian diffuse reflection model. Finally, the specular term accounts for the "shiny" reflection
						look, where the intensity of the shininess depends on the angle between the normalized vector between light direction
						and view direction, and the surface normal. This value controls the size and brightness of the specular highlights.
					</p>
					<p>
						<b>Ambient component:</b>
					</p>
					<p>
						<img src="./p5-blinn-a.png" alt="cbspheres" width="400" height="300">
					</p>
					<p>
						<b>Diffuse component: </b>
					</p>
					<p>
						<img src="./p5-blinn-d.png" alt="cbspheres" width="400" height="300">
					</p>
					<p>
						<b>Specular component: </b>
					</p>
					<p>
						<img src="./p5-blinn-s.png" alt="cbspheres" width="400" height="300">
					</p>
					<p>
						<b>Entire Blinn-Phong Model</b>
					</p>
					<p>
						<img src="./p5-blinn.png" alt="cbspheres" width="400" height="300">
					</p>
				<h3>Show a screenshot of your texture mapping shader using your own custom texture by modifying the textures in 
					/textures/.</h3>
					<p>
						<img src="./p5-texture-1.png" alt="cbspheres" width="400" height="300">
						<img src="./p5-texture-2.png" alt="cbspheres" width="400" height="300">
					</p>
				<h3>Show a screenshot of bump mapping on the cloth and on the sphere. Show a screenshot of displacement mapping 
					on the sphere. Use the same texture for both renders. You can either provide your own texture or use one of 
					the ones in the textures directory, BUT choose one that's not the default texture_2.png. 
					Compare the two approaches and resulting renders in your own words. Compare how your the two shaders 
					react to the sphere by changing the sphere mesh's coarseness by using -o 16 -a 16 and then -o 128 -a 128.</h3>
					<p>
						<b>Bump mapping on the cloth</b>
						<img src="./p5-bump-2.png" alt="cbspheres" width="400" height="300">
					</p>
					<p>
						<b>Bump mapping on the sphere</b>
						<img src="./p5-bump-1.png" alt="cbspheres" width="400" height="300">
					</p>
					<p>
						<b>Displacement mapping on the cloth</b>
						<img src="./p5-displacement-cloth.png" alt="cbspheres" width="400" height="300">
					</p>
					<p>
						<b>Displacement mapping on the sphere</b>
						<img src="./p5-displacement-sphere.png" alt="cbspheres" width="400" height="300">
					</p>
					<p>
					The bump mapping approach simulates surface with shading, while displacement mapping physically modifies
					the geometry of the object based on texture information. While displacement mapping is supposed to produce
					more realistic texture looks, it can take longer to render than bump mapping. 
					In the resulting renders, the bump mapping looks just like the cloth was painted with the new texture on top
					as a "skin". On the other hand, the displacement mapping cloth actually has outward grooves and looks 
					rougher, showing how the geometry has actually been altered in the cloth.
					</p>
					<p>
						The two shaders react to the sphere differently when changing the vertical and horizontal resolution.
						For the bump shading, the differences in using parameters -o 16 -a 16 and -o 128 -a 128 are very minimal.
						There is very slight differences in reflection brightness and shading in a few areas that I am barely picking up.
						However, for displacement mapping, the differences are much more drastic. The sphere mesh's coarseness with
						-o 16 -a 16 is less than with 128 res, so the surface has less drastic lighting and roughness showing.
					</p>
				<h3>Show a screenshot of your mirror shader on the cloth and on the sphere.</h3>
					<p>
						<b>Mirror shader:</b>
						<img src="./p5-mirror-1.png" alt="cbspheres" width="400" height="300">
						<img src="./p5-mirror-2.png" alt="cbspheres" width="400" height="300">
					</p>
				<h3>Explain what you did in your custom shader, if you made one.</h3>
					<p>

					</p>
	</body>
</html>